# 更新日志

## 2025-12-19 v3.3 JCE 审稿意见修约与学术合规化

**里程碑更新**：针对 Journal of Chemical Education (JCE) 审稿反馈进行深度内容修约。

### 📚 学术合规化 (Academic Rigor & Alignment)

1.  **论文标题升级 (Title Alignment)**
    -   新增英文标题，突出 **Clementi-Roetti 基组**与**实时蒙特卡洛采样**。
2.  **方法论重定义 (Methodology Evolution)**
    -   将 AI 辅助开发模式正式定义为 **AI-Assisted Domain-Driven Development (AI-ADRD)**，强调物理定律作为质量护栏。
3.  **物理基础澄清 (Physics Clarification)**
    -   **杂化轨道数学描述**：详细说明了从 Thomson 点分布到 SVD 系数映射的正交变换过程。
    -   **势能 Z 值处理**：明确指出势能图使用全核电荷 Z，依靠 Hartree-Fock 优化的概率分布隐式还原多体效应。
4.  **教育理论引入 (Pedagogical Framework)**
    -   引入 **Johnstone's Triangle** (宏观/微观/符号) 理论，提升工具的教育哲学高度。

### 📄 支撑材料完善 (Supporting Information)

1.  **新建 Supporting Information 文档**：包含基组解析代码片段、杂化算法伪代码、15分钟教学教案以及多平台设备支持方案。

---

## 2025-12-19 v3.2 杂化算法进化与等值面性能飞跃

**里程碑更新**：引入几何优化杂化算法，并全面重构等值面渲染管线。

### 🧬 杂化算法创新 (Hybrid Algorithm Evolution)

1.  **通用几何优化算法**
    -   引入 **Thomson 问题 (Thomson Problem)** 梯度下降：模拟球面电荷排斥，自动计算多轨道杂化的对称几何取向。
    -   应用 **SVD (奇异值分解)** 求解正交 Procrustes 转换：打破硬编码限制，实现任意轨道组合的精确杂化系数计算。
    -   **全向支持**：自动适配 sp, sp², sp³, sp³d, sp³d² 以及各种非标准轨道组合。

2.  **物理一致性强化**
    -   杂化轨道完全支持 **Slater-Type Orbitals (STO)** 基组，有效核电荷与屏蔽效应在杂化分布中得到精确体现。

### ⚡ 等值面性能重构 (Isosurface Performance)

1.  **全异步 Worker 架构**
    -   Marching Cubes 计算完全从主线程剥离至 **Web Worker**，高负载计算不再造成界面卡顿。
    -   **预渲染缓存机制**：采样完成后立即在后台静默启动预计算，用户触发开关时实现**即时渲染**。

2.  **精度与画质提升**
    -   等值面网格分辨率从 160³ 提升至 **200³**（网格密度增加约 56.2%），线框与细节表现更丝滑。

3.  **智能生命周期管理**
    -   新增等值面缓存回收机制，在清除绘图或切换原子时自动释放 Three.js 资源。

---

## 2025-12-18 v3.1 势能可视化系统

**新增功能**：电子-核库仑势能的定量可视化与理论对照。

### 🔬 势能分析功能

1.  **四种势能图表类型**
    -   **势能积分 E(r)**：累积电子-核吸引能 $E(r) = -Z \int_0^r \frac{P(r')}{r'} dr'$
    -   **势能密度 dE/dr**：每单位距离的势能贡献 $\frac{dE}{dr} = -\frac{Z}{r} P(r)$
    -   **E(log r)**：对数横轴的累积势能，揭示内层电子贡献
    -   **dE/d(log r)**：对数尺度势能密度 $= -Z \cdot P(r)$

2.  **理论曲线验证**
    -   新增 `calculateCumulativePotential` 函数，使用梯形法则数值积分
    -   采样直方图与理论曲线实时对照，验证物理正确性

3.  **比照模式势能支持**
    -   在比照模式下可直接比较不同原子/轨道的势能分布
    -   例如：比较 H-1s 和 He-1s 的 E(r) 曲线，直观展示核电荷对束缚能的影响

### 🎨 界面改进

1.  **图表类型下拉菜单扩展**
    -   "概率密度图"下拉菜单新增 4 种势能图表选项

2.  **图表状态持久化**
    -   切换图表类型时保持理论曲线的显示/隐藏状态

---

## 2025-12-08 v3.0 物理引擎与多电子支持

**里程碑版本**：项目核心物理引擎更新，支持多电子原子与杂化计算。

### 🚀 物理引擎更新

1.  **多电子原子支持 (He - Xe)**
    -   集成 **Clementi-Roetti (1974)** 标准 STO (Slater-Type Orbitals) 基组数据。
    -   支持从氦 (He) 到氙 (Xe) 以及镧系元素的电子轨道模拟。
    -   实现多指数波函数叠加，还原原子轨道的径向节点结构。

2.  **STO 相位校正**
    -   **问题解决**：修复了 STO 数据与 Condon-Shortley 相位约定不一致导致的部分轨道 (如 Li-2s, He-1s) 相位反转问题。
    -   **算法实现**：引入渐近分析算法，通过对比 $r \to \infty$ 处的波函数符号与解析解，校正全域相位。

3.  **杂化轨道叠加计算**
    -   **改进**：更新杂化轨道概率密度计算公式，包含 **交叉项 (Cross-terms)**：
        $$P = \sum |c_i \psi_i|^2 + \sum_{i \neq j} c_i c_j \psi_i \psi_j^*$$
    -   **影响**：修正了 $s-p$ 混杂等非正交叠加时的密度计算，确保物理正确性。
    -   **实现**：在采样中引入双重循环 CDF 构建。

4.  **动态半径估算 (Min-Zeta Strategy)**
    -   采用 **最小指数优先 (Minimum Zeta)** 策略，更准确地估算重原子 (如 Xe-5p) 的电子云边界。

### 🎨 可视化与交互

1.  **轨道轮廓分辨率提升**
    -   Marching Cubes 网格分辨率从 120 提升至 **160**，增加等值面的平滑度。

2.  **比照模式 (Compare Mode) 滚动更新**
    -   引入滚动更新机制：每帧替换约 1% 采样点，支持参数调整时的平滑过渡。

3.  **图表系统同步**
    -   径向分布函数 (RDF) 图表直接调用物理引擎计算理论曲线，确保图表与 3D 渲染一致。

---

## 2025-12-02 v2.1 UI 视觉全面升级
(以下内容保持不变...)
