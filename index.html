<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ°¢åŸå­ç”µå­äº‘å¯è§†åŒ–</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <button id="app-fullscreen-btn" title="å…¨å±æ¨¡å¼">â›¶</button>
    <button id="gesture-control-btn" title="æ‰‹åŠ¿æ§åˆ¶ (æ¸²æŸ“å®Œæˆåå¯ç”¨)" disabled style="opacity: 0.5; cursor: not-allowed;">ğŸ–</button>
    <div id="gesture-status-popup" class="gesture-popup" style="display: none; position: fixed; top: 20px; right: 20px; left: auto; transform: none;">
        <div class="status-indicator"></div>
        <span id="gesture-status-text">ç­‰å¾…æ‰‹åŠ¿...</span>
    </div>
    <div id="container"></div>
    <div id="control-panel" class="panel">
        <div class="panel-tab" id="control-panel-tab" title="ç‚¹å‡»å±•å¼€æ§åˆ¶é¢æ¿">â—‚ æ§åˆ¶</div>
        <div class="panel-content">
            <div class="panel-header">
                <h3>æ§åˆ¶</h3>
                <div>
                    <button id="control-collapse-btn" class="collapse-btn" title="æ”¶èµ·">â–¸</button>
                </div>
            </div>
            <div class="panel-body">
            <div class="control-group">
                <label for="multiselect-toggle">å¤šé€‰æ¨¡å¼</label>
                <input type="checkbox" id="multiselect-toggle" />
            </div>
            <div class="control-group">
                <label for="compare-toggle">æ¯”ç…§æ¨¡å¼</label>
                <input type="checkbox" id="compare-toggle" />
            </div>
            <div class="control-group multiselect-controls" style="display: none;">
                <button id="clear-all-selections" class="clear-selections-btn">æ¸…é™¤æ‰€æœ‰é€‰æ‹©</button>
            </div>
        <div class="control-group">
            <label for="orbital-select">é€‰æ‹©è½¨é“</label>
            <select id="orbital-select" size="6">
                <!-- n=1 -->
                <option value="1s" selected>1s</option>
                <!-- n=2 -->
                <option value="2s">2s</option>
                <option value="2px">2px</option>
                <option value="2py">2py</option>
                <option value="2pz">2pz</option>
                <!-- n=3 -->
                <option value="3s">3s</option>
                <option value="3px">3px</option>
                <option value="3py">3py</option>
                <option value="3pz">3pz</option>
                <option value="3d_xy">3d(xy)</option>
                <option value="3d_xz">3d(xz)</option>
                <option value="3d_yz">3d(yz)</option>
                <option value="3d_x2-y2">3d(x^2-y^2)</option>
                <option value="3d_z2">3d(z^2)</option>
                <!-- n=4 -->
                <option value="4s">4s</option>
                <option value="4px">4px</option>
                <option value="4py">4py</option>
                <option value="4pz">4pz</option>
                <option value="4d_xy">4d(xy)</option>
                <option value="4d_xz">4d(xz)</option>
                <option value="4d_yz">4d(yz)</option>
                <option value="4d_x2-y2">4d(x^2-y^2)</option>
                <option value="4d_z2">4d(z^2)</option>
                <option value="4f_xyz">4f(xyz)</option>
                <option value="4f_xz2">4f(xz^2)</option>
                <option value="4f_yz2">4f(yz^2)</option>
                <option value="4f_z3">4f(z^3)</option>
                <option value="4f_z(x2-y2)">4f(z(x^2-y^2))</option>
                <option value="4f_x(x2-3y2)">4f(x(x^2-3y^2))</option>
                <option value="4f_y(3x2-y2)">4f(y(3x^2-y^2))</option>
            </select>
        </div>
        <div class="control-group">
            <label for="phase-toggle">æ¸²æŸ“ç›¸ä½</label>
            <input type="checkbox" id="phase-toggle" />
        </div>
        <div class="control-group">
            <label for="max-points-select">æœ€å¤§ç‚¹æ•°</label>
            <select id="max-points-select">
                <option value="6000">6,000</option>
                <option value="12000">12,000</option>
                <option value="24000" selected>24,000</option>
                <option value="48000">48,000</option>
                <option value="100000">100,000</option>
                <option value="400000">400,000</option>
            </select>
        </div>
        <div class="control-group">
            <label for="axes-size-range">åæ ‡ç³»å¤§å°</label>
            <input id="axes-size-range" type="range" min="0" max="105" step="1" value="0" title="æ¯”ä¾‹ç³»æ•° 0-1.05ï¼Œ0ä¸ºå…³é—­">
        </div>
        <div class="control-group">
            <label for="speed-range">ç”Ÿæˆé€Ÿåº¦</label>
            <input id="speed-range" type="range" min="20000" max="800000" step="1000" value="500000">
        </div>
        <div class="control-group">
            <label for="center-lock">å›ºå®šè‡³ä¸­å¿ƒ</label>
            <input type="checkbox" id="center-lock">
        </div>
        <div class="control-group">
            <label for="size-select">ç‚¹çš„å¤§å°</label>
            <select id="size-select">
                <option value="small">å°</option>
                <option value="medium" selected>ä¸­</option>
                <option value="large">å¤§</option>
            </select>
        </div>
        <div class="control-group">
            <label for="opacity-range">ä¸é€æ˜åº¦</label>
            <input id="opacity-range" type="range" min="0.05" max="1" step="0.01" value="1">
        </div>
        <div class="control-group">
            <p>æœ€è¿œè·ç¦» / <span id="farthest-dist">0</span></p>
        </div>
        <div class="control-group action-buttons">
            <button id="start-button">å¯åŠ¨</button>
            <button id="pause-button">æš‚åœ</button>
            <button id="clear-button">é‡ç½®</button>
        </div>
        <div class="control-group">
            <p>å½“å‰ç‚¹æ•° / <span id="point-count">0</span></p>
        </div>
            </div> <!-- ç»“æŸ panel-body -->
        </div> <!-- ç»“æŸ panel-content -->
    </div>

    <div id="data-panel" class="panel">
        <div id="data-panel-resize-handle" title="æ‹–åŠ¨æ”¹å˜å¤§å°"></div>
        <div class="panel-tab" id="data-panel-tab" title="ç‚¹å‡»å±•å¼€æ•°æ®é¢æ¿">æ•°æ® â–¸</div>
        <div class="panel-content">
            <div class="panel-header">
                <h3>æ•°æ®</h3>
                <div>
                    <button id="chart-enlarge-btn" title="æ”¾å¤§/è¿˜åŸå›¾è¡¨">â¤¢</button>
                    <button id="data-collapse-btn" class="collapse-btn" title="æ”¶èµ·">â—‚</button>
                </div>
            </div>
            <div class="panel-body">
                <div class="control-group">
                    <label for="plot-type-select">æ¦‚ç‡å¯†åº¦å›¾</label>
                    <select id="plot-type-select">
                        <option value="radial">å¾„å‘åˆ†å¸ƒ</option>
                        <option value="angular">è§’å‘åˆ†å¸ƒ (Î¸)</option>
                    </select>
                </div>
                <div class="control-group">
                    <label for="angular-3d-toggle">3Dè§’å‘å½¢çŠ¶</label>
                    <input type="checkbox" id="angular-3d-toggle">
                </div>
                <div class="chart-container">
                    <canvas id="probability-chart"></canvas>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
    <script src="physics.js"></script>
    <script src="data_panel.js"></script>
    <!-- æ¨¡å—åŒ–è„šæœ¬æ–‡ä»¶ -->
    <script src="core.js"></script>
    <script src="scene.js"></script>
    <script src="orbital.js"></script>
    <script src="sampling.js"></script>
    <script src="visualization.js"></script>
    <script src="ui.js"></script>
    <!-- gesture_v2.js v4.0: æåˆæ—‹è½¬æ¨¡å¼ - æ›´ç¨³å®šçš„æ‰‹åŠ¿æ§åˆ¶ -->
    <script type="module" src="gesture_v2.js?v=4.0"></script>
    <script>
        // ç¯å¢ƒæ£€æµ‹
        if (window.location.protocol === 'file:') {
            const div = document.createElement('div');
            div.style.cssText = 'position:fixed;top:0;left:0;width:100%;background:red;color:white;text-align:center;padding:10px;z-index:99999;font-weight:bold;';
            div.innerHTML = 'è­¦å‘Šï¼šæ£€æµ‹åˆ°æ‚¨æ­£åœ¨ç›´æ¥æ‰“å¼€ HTML æ–‡ä»¶ã€‚æ‰‹åŠ¿è¯†åˆ«åŠŸèƒ½éœ€è¦ HTTP æœåŠ¡å™¨ç¯å¢ƒã€‚<br>è¯·è¿è¡Œæ–‡ä»¶å¤¹ä¸­çš„ <code>start_server.py</code> è„šæœ¬ï¼Œæˆ–ä½¿ç”¨ VS Code Live Serverã€‚';
            document.body.appendChild(div);
        }
    </script>
    <script src="main.js"></script>
</body>
</html>
