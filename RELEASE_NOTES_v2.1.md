# 氢原子电子云可视化 v2.1 发布说明

## 🎉 版本亮点

v2.1 版本带来了全面的 UI 视觉升级，提升了用户交互体验和界面美观度。

---

## ✨ 主要更新

### 🎨 UI 视觉全面升级

#### 1. 发光效果优化

##### 按钮激活发光效果
- **双层发光设计**：所有按钮、开关、复选框的激活状态添加双层发光效果
- **发光增强**：发光半径扩大一倍（24px + 40px 双层），视觉效果更加明显
- **文字发光**：激活状态的文字也带有发光效果（text-shadow: 16px），提升整体一致性
- **全面适用**：功能框、模式切换、轨道选择、开关滑块等所有交互元素均已优化

##### 发光裁剪问题根本修复
- **容器溢出处理**：将所有容器的 `overflow: hidden` 改为 `overflow: visible`
- **完整显示**：包括面板内容、面板主体、子菜单等，确保发光效果完全不被裁剪
- **视觉完整性**：用户可以看到完整的发光效果，提升界面质感

##### 辉光效果优化
- **精确控制**：Bloom 半径从 0.5 缩小至 0.2，防止边缘裁剪
- **平衡补偿**：相应增加强度补偿，保持视觉效果不变
- **滑块调整**：最大亮度滑块优化公式：新值 = 100 + (原值-100) × 0.1

#### 2. 权重模式修复

##### 三系数亮度架构
- **科学计算**：辉光亮度 = 基础亮度 × 权重系数 × 闪烁系数
- **独立控制**：权重模式关闭时，系数为 1（不影响亮度）
- **闪烁控制**：闪烁模式关闭时，系数为 1（不影响亮度）

##### 独立权重模式
- **灵活使用**：非闪烁模式下也能使用权重模式
- **开启效果**：权重模式开启时，辉光强度 1.5
- **关闭效果**：权重模式关闭时，保持默认辉光强度 0.8
- **问题修复**：修复了关闭权重模式导致辉光完全消失的问题

#### 3. 面板边框内侧发光

##### 静态玻璃边框效果
- **左侧面板**：控制面板、视图面板的右边、上边、下边发光
- **右侧面板**：数据面板、实验面板的左边、上边、下边发光
- **设计理念**：发光朝向场景中心，增强沉浸感和空间感

##### 玻璃列表圆角统一
- **圆角统一**：`.glass-list` 圆角与按钮统一为 16px，视觉更协调
- **选中反馈**：选中项带有绿色发光边框和文字阴影，状态清晰可见

### 🧹 功能精简

- **闪烁模式优化**：移除闪烁模式中的"扩散"效果，保留星空、呼吸、波浪三种经典模式

---

## 📋 v2.1 之前的重要功能（保留）

### UI 视觉优化（2025-12-02 早期版本）

#### 面板样式统一化
- **材质统一**：所有面板采用统一的半透明毛玻璃材质
- **模糊效果**：控件使用 `blur(12px)` 模糊效果，面板使用轻微模糊 `blur(1px)` 保持内容清晰
- **静态玻璃边框**：面板边缘使用静态高光边框，顶部和左侧微亮，底部和右侧轻微暗边
- **深度阴影**：面板默认显示深度阴影（原先仅在 hover 时显示），增强层次感
- **颜色主题**：激活状态统一使用绿色主题 `rgba(0, 180, 0, ...)`

### 性能优化与 n=5 轨道支持（2024-12）

#### 重要性采样优化
- **径向分布采样**：使用接近真实分布的提议分布优化采样效率
- **角向分布采样**：采用均匀球面采样结合重要性权重修正
- **效率提升**：
  - 低 n 值轨道（n=1,2,3）：效率提升约 2-3 倍
  - 高 n 值轨道（n=4,5）：效率提升约 5-10 倍
  - g 轨道等弥散分布：效率提升可达 10 倍以上

#### 第五能层轨道支持
- **新增 25 种轨道**：完整支持 n=5 的所有轨道类型
  - 5s：1 种
  - 5p：3 种
  - 5d：5 种
  - 5f：7 种
  - 5g：9 种（最高角量子数 l=4）

### 坐标轴功能更新

#### 根本性修复
- **统一旋转状态管理**：创建 `resetAllSceneObjectsRotation()` 函数统一管理所有场景对象
- **同步保证**：点云、坐标轴、角向分布叠加层的旋转状态完全同步
- **单一职责**：所有旋转重置逻辑集中在一个函数中，易于维护

#### 功能完善
- **重置功能**：点击"重置"时，坐标轴显示状态正确重置
- **启动保留**：点击"启动"后，滑动条保留用户设置，不归零
- **实时调节**：渲染过程中坐标系大小随采样点距离实时调节

---

## 🚀 核心特性（保持）

### 🎯 物理精确性
- 完整实现氢原子波函数 ψ(n,l,m)
- Condon-Shortley 相位约定
- 重要性采样的蒙特卡洛方法

### 🔬 轨道支持
- 支持 1s 至 5g 的全部轨道类型（n=1~5, l=0~4，共 55 种轨道）
- 杂化轨道：sp、sp²、sp³、sp³d、sp³d²
- 多轨道模式：单轨、多选叠加、轨道对比

### 🎨 可视化功能
- 相位显示：红/蓝色区分波函数正负相位
- 轨道轮廓：95% 概率密度等值面
- 3D 角向分布：球谐函数独立显示
- 径向/角向分布图：实时概率密度直方图

### 🖐️ 交互体验
- 手势控制：握拳旋转、双手缩放
- 自动旋转录制：可导出视频
- 闪烁动效：星空、呼吸、波浪
- 高清导出：透明背景 PNG

---

## 📦 下载与安装

### Windows 用户（推荐）
1. 下载 `Hydrogen_Electron_Cloud.exe`
2. 双击运行，程序会自动启动服务器并打开浏览器
3. 关闭控制台窗口即可退出

### 源码运行
1. 确保已安装 Python 3.x
2. 运行 `python start_server.py`
3. 浏览器访问 `http://127.0.0.1:8000`

---

## 📚 相关文档

- [README.md](README.md) - 项目介绍和快速开始
- [USAGE_GUIDE.md](USAGE_GUIDE.md) - 详细使用指南（手势控制、坐标系控制等）
- [ALGORITHMS.md](ALGORITHMS.md) - 算法工程文档（量子力学计算、采样算法等）
- [CHANGELOG.md](CHANGELOG.md) - 完整更新日志

---

## 🛠️ 技术栈

- **Three.js** - 3D WebGL 渲染引擎
- **Chart.js** - 数据可视化图表
- **MediaPipe Hands** - 手势识别
- **Web Workers** - 多线程采样

---

## 📄 许可证

MIT License © 2024

---

## 🙏 致谢

感谢所有为本项目提供反馈和建议的用户！

---

**发布日期**：2025-12-06  
**版本号**：v2.1  
**项目地址**：https://github.com/benbaobaoshigemi/Hydrogen-Atom-Electron-Cloud-Visualization-REV
